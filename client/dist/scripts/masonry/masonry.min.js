export const constants=(()=>{"use strict";const t={DEBOUNCE(t=(()=>{}),e=100){let n;return(...o)=>{n&&clearTimeout(n),n=setTimeout((()=>{t(...o),n=null}),e)}},THROTTLING(t=(()=>{}),e=100){let n;return(...o)=>{n||(n=setTimeout((()=>{t(...o),n=null}),e))}},REDUCE(t,e,n){n||(n=e[Symbol.iterator](),e=n.next().value);for(const o of n)e=t(e,o);return e},GO:(...e)=>()=>t.REDUCE(((t,e)=>e(t)),e),RO(e=(()=>{}),n=100){const o=t.DEBOUNCE(e,n),r=new ResizeObserver(((t,e)=>{o(t)}));return{observe(t){r.observe(t)},unobserve(t){r.unobserve(t)},disconnect(){r.disconnect()}}},IO(t=(()=>{})){const e=new IntersectionObserver(((e,n)=>{t(e)}));return{observe(t){e.observe(t)},unobserve(t){e.unobserve(t)},disconnect(){e.disconnect()}}},IS_DESKTOP(){const t=window.navigator.userAgent;return/windows nt|macintosh|linux/i.test(t)}};return{METHODS:t,FETCH:{async GET(t,e,n={}){const o={method:"GET",headers:{"Content-Type":"application/json",...n}},r=await fetch(t,o),s=await r.json();if(r.ok)return s;if(!r.ok)throw Error(s)}},TRANSITION:{CUBIC:[.57,.21,.69,.95]}}})();const{METHODS:METHODS,FETCH:FETCH}=constants,masonryJS=({element:t=".masonry",options:e={}})=>{const n=document.querySelector(t);if(!n)return;const o={rows:3,gap:10,timing:300,...e};n.setAttribute("style",`padding: 0 ${o.gap/2}px;`);const r={widthMasonry:n.clientWidth,rowsHeight:Array.from({length:o.rows},(()=>0)),width:Math.floor((n.offsetWidth-o.gap)/o.rows),totalElement:new Map,newElement:new Map},s=()=>{r.rowsHeight=Array.from({length:o.rows},(()=>0))},i=()=>{r.width=Math.floor((n.offsetWidth-o.gap)/o.rows)},a=t=>{if(0!==t.size)for(const[,e]of t){e.querySelector("img").style.display||e.querySelector("img").setAttribute("style","display: block; width: 100%; height: auto;"),e.setAttribute("style",`position: absolute; \n                top: 0; \n                left: ${o.gap/2}px; \n                width: ${r.width}px; \n                padding: 0 ${o.gap/2}px; \n                box-sizing: border-box;`);const t=e.offsetHeight,s=r.rowsHeight.indexOf(Math.min(...r.rowsHeight))<0?0:r.rowsHeight.indexOf(Math.min(...r.rowsHeight));e.style.transform=`translate(${r.width*s}px, ${Number(r.rowsHeight[s])+o.gap}px)`,e.classList.remove("isNew"),r.rowsHeight[s]=r.rowsHeight[s]+t+o.gap,n.dataset.arr=r.rowsHeight.join(" "),r.newElement.has(e)&&r.newElement.delete(e)}},l=()=>{(()=>{const t=n.querySelectorAll(".img-wrap.isNew"),e=t.length;for(let n=0;n<e;n++)r.totalElement.has(t[n])||(r.totalElement.set(t[n],t[n]),r.newElement.set(t[n],t[n]))})(),i(),a(r.newElement)};s();return METHODS.RO((()=>{const t=n.clientWidth,e=t!==r.widthMasonry;e&&(s(),i()),a(e?r.totalElement:r.newElement),r.widthMasonry=t}),10).observe(document.querySelector("body")),()=>{l()}},prototype=(()=>{"use strict";let t=0;const e=document.querySelector(".masonry"),n=document.querySelector(".infiniteScroll"),o=(t=!1)=>{document.getElementById("loader").style.display=t?"flex":"none"},r=(t=!1)=>{n.classList[t?"add":"remove"]("disconnect"),t&&(()=>{const t=e.dataset.arr.split(" ")??[],o=Math.max(...t);n.style.transform=`translateY(${o<0?window.innerHeight+10:o-10}px)`})()},s=masonryJS({element:".masonry",options:{rows:3}}),i=async t=>{((t=[])=>{if(o(!0),!s)return;if(!e)return;if(0===t.length)return;const n=t.reduce(((t,e)=>[...t,`<div class="img-wrap isNew">\n                    <img src="${e.download_url}" width="${e.width}" height="${e.height}" alt="${e.author}">\n                </div>`]),[]);e.insertAdjacentHTML("beforeend",n.join("")),o()})(t),s(),r(!0)},a=()=>{if(n.classList.contains("disconnect"))return r();(async()=>{const e=await(async()=>(t++,await FETCH.GET(`https://picsum.photos/v2/list?page=${t}&limit=20`)))();e&&await i(e)})()};return{init:()=>{METHODS.IO(a).observe(n)}}})();"complete"===document.readyState?prototype.init():document.addEventListener&&document.addEventListener("DOMContentLoaded",prototype.init);