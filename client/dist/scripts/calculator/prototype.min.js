const JS=(()=>{const t=(t,e,n="add")=>{t&&e&&t.classList[n](e)},e=(e=null)=>{const n=document.getElementById(e??"calculator");if(!n)return;const l="current",c=null,r={plus:"+",subtraction:"-",multiply:"*",divide:"รท"},o=document.getElementById("calculator-result"),a=document.getElementById("calculator-expression"),i=[0],s=[];let u=c,d=c,p=c,m=s[0],g=0,f=!1,v=!1,y=!1,b=!1;const C=t=>{o.textContent=(+t).toLocaleString("KO-kr")},E=t=>{C(t),s.splice(0),i.splice(0),i[0]=t,g=0},L=()=>{(()=>{const t=s.length,e=i.length;t===e&&s.splice(e-1);let n=0;for(let t=0;t<e;t++){const t=s[n];"plus"!==t&&"subtraction"!==t?("multiply"===t&&(i[n]*=i[n+1]),"divide"===t&&(i[n]=i[n]/i[n+1]),i.splice(n+1,1),s.splice(n,1)):n++}})(),i.length>1&&(()=>{const t=i.length;for(let e=0;e<t;e++){const t=s[0];"plus"===t&&(i[0]+=i[1]),"subtraction"===t&&(i[0]-=i[1]),i.splice(1,1),s.splice(0,1)}})(),E(i[0])},h={number(t){v&&g++;const e=i[g]??0;m=((t,e)=>{let n=e,l=b?0:t;return"dot"===n&&(f=!0,n=l),"percent"===n&&(n=l/100),"number"==typeof e&&(n=+(""+l+n)/(f?10:1),f=!1),n})(e,t),i[g]=m,C(m),p=null,b=!1,v=!1},negative(){i[g]*=-1,y=!y},calculation(){b=!0,L()},allClear(){E(0)}},S=e=>{if(e.preventDefault(),"BUTTON"!==e.target.tagName)return;const n=e.target;p=(t=>{if(t.indexOf("-")>-1)return((t=[])=>0===t.length?"":`${t[0]}${t[1].slice(0,1).toUpperCase()}${t[1].slice(1)}`)(t.split("-"));return isNaN(+t)?t:+t})(n.dataset.value);const c="dot"===p,o="number"==typeof p||"percent"===p;(o||c)&&h.number(p),u&&(d=u,t(d,l,"remove")),o&&!c||"calculation"===p||(u=n,t(u,l,"add")),o||c||"calculation"!==p&&"allClear"!==p&&(s[g]=p,v=!0),h[p]&&h[p](),a.textContent=i.reduce(((t,e,n)=>t+`${e} ${r[s[n]]??""}`),"")};return()=>{n.addEventListener("click",S,{capture:!0})}};return{init:()=>{const t=e("calculator");t&&t()}}})();"complete"===document.readyState?JS.init():document.addEventListener&&document.addEventListener("DOMContentLoaded",JS.init);