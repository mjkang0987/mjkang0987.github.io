const JS=(()=>{const t=(t,e,n='add')=>{t&&e&&t.classList[n](e)},e=(e=null)=>{const n=document.getElementById(e??'calculator');if(!n)return;const l='current',c=null,r={plus:'+',subtraction:'-',multiply:'*',divide:'รท'},o={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,'=':'calculator','+':'plus','-':'subtraction','*':'multiply','/':'divide','%':'percent','.':'dot'},u=document.getElementById('calculator-result'),a=document.getElementById('calculator-expression'),i=[0],s=[];let d=c,p=c,m=c,g=s[0],y=0,f=!1,v=!1,b=!1,E=!1;const L=t=>{u.textContent=(+t).toLocaleString('KO-kr')},C=t=>{L(t),s.splice(0),i.splice(0),i[0]=t,y=0},h=()=>{(()=>{const t=s.length,e=i.length;t===e&&s.splice(e-1);let n=0;for(let t=0;t<e;t++){const t=s[n];'plus'!==t&&'subtraction'!==t?('multiply'===t&&(i[n]*=i[n+1]),'divide'===t&&(i[n]=i[n]/i[n+1]),i.splice(n+1,1),s.splice(n,1)):n++}})(),i.length>1&&(()=>{const t=i.length;for(let e=0;e<t;e++){const t=s[0];'plus'===t&&(i[0]+=i[1]),'subtraction'===t&&(i[0]-=i[1]),i.splice(1,1),s.splice(0,1)}})(),C(i[0])},k={number(t){v&&y++;const e=i[y]??0;g=((t,e)=>{let n=e,l=E?0:t;return'dot'===n&&(f=!0,n=l),'percent'===n&&(n=l/100),'number'==typeof e&&(n=+(''+l+n)/(f?10:1),f=!1),n})(e,t),i[y]=g,L(g),m=null,E=!1,v=!1},negative(){i[y]*=-1,b=!b},calculation(){E=!0,h()},allClear(){C(0)}},S=e=>{const n='string'==typeof e;if(!n&&(e.preventDefault(),'BUTTON'!==e.target?.tagName))return;const c=e.target;m=n?o[e]:(t=>{if(t.indexOf('-')>-1)return((t=[])=>0===t.length?'':`${t[0]}${t[1].slice(0,1).toUpperCase()}${t[1].slice(1)}`)(t.split('-'));return isNaN(+t)?t:+t})(c?.dataset.value);const u='dot'===m,g='number'==typeof m||'percent'===m;(g||u)&&k.number(m),d&&(p=d,t(p,l,'remove')),g&&!u||'calculation'===m||(d=c,t(d,l,'add')),g||u||(f=!1,'calculation'!==m&&'allClear'!==m&&(s[y]=m,v=!0)),k[m]&&k[m](),a.textContent=i.reduce(((t,e,n)=>t+`${e} ${r[s[n]]??''}`),'')},$=t=>{if(t.preventDefault(),!t.key)return;const e=t.key;S(e)};return()=>{n.addEventListener('click',S,{capture:!0}),document.addEventListener('keydown',((t=(()=>{}),e=100)=>{let n;return(...l)=>{n||(n=setTimeout((()=>{t(...l),n=null}),e))}})($,10),{capture:!0})}};return{init:()=>{const t=e('calculator');t&&t()}}})();'complete'===document.readyState?JS.init():document.addEventListener&&document.addEventListener('DOMContentLoaded',JS.init);