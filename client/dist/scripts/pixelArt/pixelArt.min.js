import{SELECTOR,ELEMENTS,COLORS,LENGTH}from'./constants.min.js';import{UTILS}from'../constants/utils.min.js';const{THROTTLING:THROTTLING,CREATE_EL:CREATE_EL}=UTILS;function PixelArt(){this.selector={},this.color=null,this.target=null,this.isDown=!1,this.init(),Object.hasOwnProperty.call(this.selector,'INPUT')&&(this.createPixelArt(),this.selector.BUTTON_CREATE.addEventListener('click',this.createPixelArt.bind(this)),this.selector.PIXEL_CELLS.addEventListener('mousedown',this.bindEvents.bind(this),{capture:!0}),this.selector.PIXEL_CELLS.addEventListener('mouseup',(()=>{this.isDown=!1})))}PixelArt.prototype={init:function(){this.setElement()},insertElement:function(t,e,i){this.selector[e].insertAdjacentElement(i,t)},setElement:function(){for(let t=0;t<LENGTH.ELEMENTS;t++){const e=ELEMENTS[t],i=CREATE_EL(e.el,e.attr);this.selector[e.selector]=i,e.parentSelector&&this.insertElement(i,e.parentSelector,e.insertPosition)}SELECTOR.BODY.insertAdjacentElement('afterbegin',this.selector.PIXEL)},createPixelArt:function(){const t=+this.selector.INPUT.value;if(t>10)return;const e=[];for(let i=0;i<t+1;i++)for(let o=0;o<t;o++){const s=i!==t?`<div style="width: ${100/t}%;border: 1px solid #111;box-sizing: border-box;padding-top: ${100/t}%;height: 0;"></div>`:`<button type="button" style="width: ${100/t}%;border: 1px solid #111;box-sizing: border-box;padding-top: ${100/t}%;height: 0;background-color: ${COLORS[o]}" data-color="${o}"></button>`;e.push(s)}this.selector.PIXEL_CELLS.innerHTML=[...e].join('')},bindEvents:function(t){this.target=t.target,this.isDown=!0;const e=this.target.dataset.color;e&&(this.color=e),e||this.fillColor()},fillColor:function(){this.target.style.backgroundColor=COLORS[this.color],this.selector.PIXEL_CELLS.addEventListener('mousemove',THROTTLING(this.fillDragColor.bind(this),10))},fillDragColor:function(t){if(!this.isDown)return;const e=t.target;this.target!==t.target&&'BUTTON'!==e.tagName&&(this.target=e,t.target.style.backgroundColor='rgba(17,17,17,0.62)')}},new PixelArt;